<!DOCTYPE html>
<html ng-controller="IndexCtrl" ng-init="init()">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>{{appName}}</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="static/css/theme.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="navbar-wrapper" style="display: {{navbarVisible}};">
        <div class="container">
            <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="btn navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span><span
                                class="icon-bar"></span><span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="javascript:void(0);"><span style="font-size: 13pt;
                            color: Blue; font-weight: bold;">{{appName}}</span></a>
                    </div>
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li class="{{item.active}}" ng-repeat="item in navList"><a href="javascript:void(0);"
                                ng-click="changeUrl(item)">{{item.name}}</a></li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#/untreated-notification/"><i class="fa " ng-class="{true:'fa-bell text-red',false:'fa-bell-slash-o'}[untreatedNotificationCount>0]">
                            </i>&nbsp;提醒<span ng-if="untreatedNotificationCount>0" class="text-red">({{untreatedNotificationCount}})</span><audio
                                id="untreatedNotificationAudio" src="static/audio/1.wav"></audio></a> </li>
                            <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <img class="media-object pull-left" data-src="holder.js/32x32" src="static/img/duke.png"
                                    style="margin: -6px 0 6px 0; width: 32px; height: 32px; border: 0px" alt="{{loginUser.name}}"
                                    title="{{loginUser.name}}">&nbsp; {{loginUser.name}}&nbsp;<span class="caret"></span></a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                    <li><a href="#/user-setting/{{loginUser.username}}/"><i class="fa fa-user fa-fw"></i>
                                        &nbsp;个人信息</a></li>
                                    <li><a href="#/password-modify/{{loginUser.username}}/"><i class="fa fa-key fa-fw"></i>
                                        &nbsp;重设密码</a></li>
                                    <li class="divider"></li>
                                    <li><a href="#/client-setting/{{loginUser.username}}/"><i class="fa fa-desktop fa-fw">
                                    </i>&nbsp;客户端设置</a></li>
                                    <li class="divider"></li>
                                    <li><a href="#/notification-list/inbox/"><i class="fa fa-mail-reply fa-fw"></i>&nbsp;收件箱</a></li>
                                    <li><a href="#/notification-list/outbox/"><i class="fa fa-mail-forward fa-fw"></i>&nbsp;已发送通知</a></li>
                                </ul>
                            </li>
                            <li class="dropdown" ng-show="loginUser.isAdmin || loginUser.isSupvisor"><a class="dropdown-toggle"
                                data-toggle="dropdown" href="#"><i class="fa fa-tags"></i>&nbsp;管理&nbsp;<span class="caret"></span></a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                    <li ng-show="loginUser.isAdmin"><a href="#/category-overview/">分类</a></li>
                                    <li ng-show="loginUser.isAdmin"><a href="#/user-role-overview/user/">用户/角色</a></li>
                                    <li ng-show="loginUser.isAdmin" class="divider"></li>
                                    <li ng-show="loginUser.isAdmin"><a href="#/schedule-list/">工作调度</a></li>
                                    <li ng-show="loginUser.isAdmin" class="divider"></li>
                                    <li><a href="#/notice-list/">公告列表</a></li>
                                    <li><a href="#/notice-edit/0/">发布公告</a></li>
                                    <li class="divider"></li>
                                    <li><a href="#/idiom-overview/">常用短语</a></li>
                                </ul>
                            </li>
                            <li><a href="#/sign-out/"><i class="fa fa-sign-out"></i>&nbsp;退出</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-view>
    </div>
    <div class="container hidden-print">
        <div class="footer">
            <div class="inner">
                <p>
                    <i class="fa fa-wrench"></i>&nbsp;&nbsp;<a href="#">新科英博</a> 技术支持</p>
            </div>
        </div>
    </div>
    <script src="lib/jsSHA/sha.js" type="text/javascript"></script>
    <script src="lib/sea/sea.js" type="text/javascript"></script>
    <script type="text/javascript">
        seajs.config({
            base: "./lib/",
            alias: {
                "jquery": "jquery/jquery.min.js",
                "underscore": "underscore/underscore.min.js",
                "bootstrap": "bootstrap/js/bootstrap.min.js",
                "ng": "angular/angular.min.js",
                "ng-route": "angular/angular-route.min.js",
                "ng-resource": "angular/angular-resource.min.js",
                "ng-cookies": "angular/angular-cookies.min.js",
                "ng-local-storage": "local-storage/angular-local-storage.min.js",
                "textAngular-sanitize": "textAngular/textAngular-sanitize.min.js",
                "textAngular": "textAngular/textAngular.min.js"
            },
            preload: [
                'ng'
              ]
        });
        seajs.use(['jquery', './static/js/app'], function (jquery, app) {
            $(function () {
                app.init();
            });
        });
    </script>
    <script type="text/javascript">
        //禁止页面F5刷新
        document.onkeydown = function (e) {
            var ev = window.event || e;
            var code = ev.keyCode || ev.which;
            if (code == 116) {
                if (ev.preventDefault) {
                    ev.preventDefault();
                } else {
                    ev.keyCode = 0;
                    ev.returnValue = false;
                }
            }
        }

        //        window.onbeforeunload = function () {
        //            var n = window.event.screenX - window.screenLeft;
        //            var b = n > document.documentElement.scrollWidth - 20;
        //            if (b && window.event.clientY < 0 || window.event.altKey) {

        //            } else {
        //                return "你确定要刷新页面吗？";
        //            }
        //        }

        //        window.onunload = function () {
        //            window.location.href = "#/sign-in/";
        //        }

    </script>
</body>
</html>
