<!DOCTYPE html>
<html ng-controller="IndexCtrl" ng-init="init()">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>{{appName}}</title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="static/css/theme.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="navbar-wrapper" style="display: {{navbarVisible}};">
        <div class="container">
            <div class="navbar navbar-fixed-top navbar-default" role="navigation">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12">
                            <button type="button" class="btn navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                                <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span><span
                                    class="icon-bar"></span><span class="icon-bar"></span>
                            </button>
                            <a class="navbar-brand" href="javascript:void(0);"><span style="font-size: 13pt;
                                color: Blue; font-weight: bold;">{{appName}}</span></a>
                            <div class="navbar-collapse collapse">
                                <ul class="nav navbar-nav">
                                    <li class="{{item.active}}" ng-repeat="item in navList"><a href="javascript:void(0);"
                                        ng-click="changeUrl(item)">{{item.name}}</a></li>
                                </ul>
                                <ul class="nav navbar-nav navbar-right">
                                    <li><a href="#/untreated-notification/"><span class="fa-stack" style="margin: -8px 0 0 0;
                                        width: 25px; height: 25px;"><i class="fa fa-bell-o fa-stack-2x"></i><i class="fa fa-bolt fa-stack-1x"
                                            ng-class="{true:'text-red',false:''}[untreatedNotificationCount>0]"></i></span>
                                        &nbsp;通知<span ng-if="untreatedNotificationCount>0" class="text-red">({{untreatedNotificationCount}})</span></a>
                                    </li>
                                    <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                        <img class="media-object pull-left" data-src="holder.js/32x32" src="static/img/duke.png"
                                            style="margin: -6px 0 6px 0; width: 32px; height: 32px; border: 0px" alt="{{loginUser.name}}"
                                            title="{{loginUser.name}}">&nbsp; {{loginUser.name}}&nbsp;<span class="caret"></span></a>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                            <li><a href="#/user-setting/{{loginUser.username}}/">个人设置</a></li>
                                            <li class="divider"></li>
                                            <li><a href="#/notification-list/inbox/">收件箱</a></li>
                                            <li><a href="#/notification-list/outbox/">已发送通知</a></li>
                                            <li class="divider"></li>
                                        </ul>
                                    </li>
                                    <li class="dropdown" ng-show="loginUser.isAdmin"><a class="dropdown-toggle" data-toggle="dropdown"
                                        href="#"><i class="fa fa-gear"></i>&nbsp;系统管理&nbsp;<span class="caret"></span></a>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                            <li><a href="#/category-overview/">分类</a></li>
                                            <li><a href="#/user-role-overview/user/">用户/角色</a></li>
                                            <li class="divider"></li>
                                        </ul>
                                    </li>
                                    <li><a href="#/sign-out/"><i class="fa fa-sign-out"></i>&nbsp;退出</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-view>
    </div>
    <div class="container">
        <div class="footer">
            <div class="inner">
                <p>
                    <i class="fa fa-wrench"></i>&nbsp;&nbsp;<a href="#">新科英博</a> 技术支持</p>
            </div>
        </div>
    </div>
    <script src="lib/jsSHA/sha.js" type="text/javascript"></script>
    <script src="lib/sea/sea.js" type="text/javascript"></script>
    <script type="text/javascript">
        seajs.config({
            base: "./lib/",
            alias: {
                "jquery": "jquery/jquery.min.js",
                "bootstrap": "bootstrap/js/bootstrap.min.js",
                "ng": "angular/angular.min.js",
                "ng-route": "angular/angular-route.min.js",
                "ng-resource": "angular/angular-resource.min.js",
                "ng-cookies": "angular/angular-cookies.min.js",
                "textAngular-sanitize": "textAngular/textAngular-sanitize.min.js",
                "textAngular": "textAngular/textAngular.min.js"
            },
            preload: [
                'ng'
              ]
        });
        seajs.use(['jquery', './static/js/app'], function (jquery, app) {
            $(function () {
                app.init();
            });
        });
    </script>
    <script type="text/javascript">
        //禁止页面F5刷新
        document.onkeydown = function (e) {
            var ev = window.event || e;
            var code = ev.keyCode || ev.which;
            if (code == 116) {
                if (ev.preventDefault) {
                    ev.preventDefault();
                } else {
                    ev.keyCode = 0;
                    ev.returnValue = false;
                }
            }
        }

        //        window.onbeforeunload = function () {
        //            var n = window.event.screenX - window.screenLeft;
        //            var b = n > document.documentElement.scrollWidth - 20;
        //            if (b && window.event.clientY < 0 || window.event.altKey) {

        //            } else {
        //                return "你确定要刷新页面吗？";
        //            }
        //        }

        //        window.onunload = function () {
        //            window.location.href = "#/sign-in/";
        //        }

    </script>
</body>
</html>
